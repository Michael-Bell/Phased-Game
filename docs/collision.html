<!DOCTYPE html>

<html>
<head>
  <title>collision.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="bullet.html">
                bullet.js
              </a>
            
              
              <a class="source" href="camera.html">
                camera.js
              </a>
            
              
              <a class="source" href="collision.html">
                collision.js
              </a>
            
              
              <a class="source" href="database.html">
                database.js
              </a>
            
              
              <a class="source" href="drops.html">
                drops.js
              </a>
            
              
              <a class="source" href="enemy.html">
                enemy.js
              </a>
            
              
              <a class="source" href="experience.html">
                experience.js
              </a>
            
              
              <a class="source" href="hearts.html">
                hearts.js
              </a>
            
              
              <a class="source" href="main.html">
                main.js
              </a>
            
              
              <a class="source" href="maptest.html">
                maptest.js
              </a>
            
              
              <a class="source" href="platforms.html">
                platforms.js
              </a>
            
              
              <a class="source" href="player.html">
                player.js
              </a>
            
              
              <a class="source" href="rain.html">
                rain.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>collision.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">collisionHandler</span><span class="hljs-params">(weakerObject, strongerObject)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Stronger object damages weaker objects, removes 1 health</p>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>damage is set by itemtosetdamageto.dmg=1; ex: player.js has player.dmg=1;</p>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>console.log(strongerObject.dmg);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">switch</span> (weakerObject) {
        <span class="hljs-keyword">case</span> player:
            <span class="hljs-keyword">if</span> (player.inv === <span class="hljs-literal">false</span>) { <span class="hljs-comment">// if the player can be damaged</span>

                <span class="hljs-keyword">if</span> (weakerObject.health &lt;= <span class="hljs-number">1</span>) { <span class="hljs-comment">// and the players health is at 1, meaning this hit brings it to 0</span>

                    weakerObject.kill(); <span class="hljs-comment">//we kill the player</span>
                    dead(<span class="hljs-string">' running into an enemy...'</span>); <span class="hljs-comment">// we just killed the player, this tells the game to reset, we can add in more stuff later</span>
                } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//if the player is vunerable, and healthy</span>
                    player.inv = <span class="hljs-literal">true</span>; <span class="hljs-comment">// the player is made invunerable</span>
                    game.time.events.add(Phaser.Timer.SECOND * <span class="hljs-number">2</span>, playerInv, <span class="hljs-keyword">this</span>); <span class="hljs-comment">// We want him to be vunerable again in two seconds</span>
                    game.time.events.add(Phaser.Timer.SECOND * <span class="hljs-number">.1</span>, incjumpCount, <span class="hljs-keyword">this</span>); <span class="hljs-comment">// We need a timer here so if he gets hit while on the ground, he doesn't get a triple jump.</span>
                    player.velocity = <span class="hljs-number">100</span>;
                    player.healthRegen = <span class="hljs-literal">false</span>;
                    player.body.velocity.y = - <span class="hljs-number">200</span>;
                    <span class="hljs-keyword">if</span>(player.scale.x&lt;<span class="hljs-number">0</span>){
                        player.knockedLeft=<span class="hljs-number">1</span>;
                    }<span class="hljs-keyword">else</span>{
                        player.knockedRight=<span class="hljs-number">1</span>;
                    }
                }
                weakerObject.health = weakerObject.health - strongerObject.dmg; <span class="hljs-comment">// we want to remove the damage done by the enemy to him, even if he dies, so that the health displayed is still 0</span>

            }
            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// Never Forget</span>

        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">if</span> (weakerObject.health &gt; <span class="hljs-number">0</span>) {
                weakerObject.health = weakerObject.health - strongerObject.dmg;

            } <span class="hljs-keyword">else</span> {
                gencoins(strongerObject.x, strongerObject.y, weakerObject.goldWorth);
                xpgain(weakerObject.xpWorth);
                weakerObject.kill();
                strongerObject.kill();
            }
    }



}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">incjumpCount</span><span class="hljs-params">()</span>{</span>
    jumpCount = <span class="hljs-number">2</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bulletWallColl</span><span class="hljs-params">(bullet, wall)</span>{</span>
    bullet.kill();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">knockback</span><span class="hljs-params">()</span>{</span>
    <span class="hljs-keyword">if</span>(player.knockedLeft&gt;<span class="hljs-number">0</span>) {
        player.body.acceleration.x = <span class="hljs-number">2000</span>;
        player.knockedLeft++;
        <span class="hljs-keyword">if</span>(player.knockedLeft&gt;=<span class="hljs-number">14</span>){
            player.knockedLeft=<span class="hljs-number">0</span>;
            player.body.acceleration.x = <span class="hljs-number">0</span>;
        }
    }
    <span class="hljs-keyword">if</span>(player.knockedRight&gt;<span class="hljs-number">0</span>) {
        player.body.acceleration.x = -<span class="hljs-number">2000</span>;
        player.knockedRight++;
        <span class="hljs-keyword">if</span>(player.knockedRight&gt;=<span class="hljs-number">14</span>){
            player.knockedRight=<span class="hljs-number">0</span>;
            player.body.acceleration.x = <span class="hljs-number">0</span>;
        }
    }
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
